!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){var r=n(1);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,"/* http://meyerweb.com/eric/tools/css/reset/ \r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\nhtml, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline; }\n\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {\n  display: block; }\n\nbody {\n  line-height: 1; }\n\nol, ul {\n  list-style: none; }\n\nblockquote, q {\n  quotes: none; }\n  blockquote:before, blockquote:after, q:before, q:after {\n    content: '';\n    content: none; }\n\ntable {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\nhtml, body {\n  box-sizing: border-box; }\n\n.game-container {\n  background: grey;\n  display: inline-block;\n  border: 3px solid #666; }\n\n.board__row {\n  display: flex; }\n\n.board__item {\n  width: 35px;\n  height: 35px;\n  border-width: 2px;\n  position: relative;\n  background: #ccc;\n  border-style: inset; }\n  .board__item.covered {\n    border-style: outset;\n    background: #aaa; }\n    .board__item.covered:active {\n      border-style: inset; }\n    .board__item.covered:after {\n      content: ''; }\n  .board__item.flag {\n    background: red;\n    border-style: outset; }\n    .board__item.flag:active {\n      border-style: outset; }\n  .board__item--bomb, .board__item--flag {\n    border-style: inset; }\n  .board__item--bomb {\n    background: black; }\n  .board__item--1:after, .board__item--2:after, .board__item--3:after, .board__item--4:after, .board__item--5:after, .board__item--6:after, .board__item--7:after, .board__item--8:after {\n    font-size: 22px;\n    font-family: monospace;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    font-weight: 600; }\n  .board__item--1:after {\n    content: '1';\n    color: blue; }\n  .board__item--2:after {\n    content: '2';\n    color: green; }\n  .board__item--3:after {\n    content: '3';\n    color: red; }\n  .board__item--4:after {\n    content: '4';\n    color: navy; }\n  .board__item--5:after {\n    content: '5';\n    color: purple; }\n  .board__item--6:after {\n    content: '6';\n    color: cadetblue; }\n  .board__item--7:after {\n    content: '7';\n    color: black; }\n  .board__item--8:after {\n    content: '8';\n    color: grey; }\n\n.info {\n  height: 30px;\n  background: lightgrey;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 20px; }\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(e){return"/*# sourceURL=".concat(r.sourceRoot).concat(e," */")});return[n].concat(i).concat([o]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(n,"}"):n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(var a=0;a<e.length;a++){var s=e[a];null!=s[0]&&r[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="(".concat(s[2],") and (").concat(n,")")),t.push(s))}},t}},function(e,t,n){var r,o,i={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===o&&(o=r.apply(this,arguments)),o}),s=function(e){var t={};return function(e,n){if("function"==typeof e)return e();if(void 0===t[e]){var r=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,n);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),c=null,l=0,u=[],d=n(4);function f(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=i[r.id];if(o){o.refs++;for(var a=0;a<o.parts.length;a++)o.parts[a](r.parts[a]);for(;a<r.parts.length;a++)o.parts.push(y(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(y(r.parts[a],t));i[r.id]={id:r.id,refs:1,parts:s}}}}function b(e,t){for(var n=[],r={},o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],s={css:i[1],media:i[2],sourceMap:i[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function p(e,t){var n=s(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=u[u.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var o=s(e.insertAt.before,n);n.insertBefore(t,o)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function h(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var r=function(){0;return n.nc}();r&&(e.attrs.nonce=r)}return v(t,e.attrs),p(e,t),t}function v(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function y(e,t){var n,r,o,i;if(t.transform&&e.css){if(!(i="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=i}if(t.singleton){var a=l++;n=c||(c=h(t)),r=w.bind(null,n,a,!1),o=w.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),p(e,t),t}(t),r=function(e,t,n){var r=n.css,o=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&o;(t.convertToAbsoluteUrls||i)&&(r=d(r));o&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),o=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=h(t),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),o=function(){m(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=b(e,t);return f(n,t),function(e){for(var r=[],o=0;o<n.length;o++){var a=n[o];(s=i[a.id]).refs--,r.push(s)}e&&f(b(e,t),t);for(o=0;o<r.length;o++){var s;if(0===(s=r[o]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete i[s.id]}}}};var g,_=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function w(e,t,n,r){var o=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=_(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var o,i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(0);new function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),o(this,"init",function(){n.element.innerHTML=n.value,n.setCountdown(1e3)}),o(this,"setCountdown",function(e){var t=setInterval(function(){n.element.innerHTML=++n.value,n.value>=999&&clearInterval(t)},e)}),this.element=document.querySelector(t),this.value=i,this.init()}("#timer"),new function e(t,n,r,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"preventContextMenu",function(){window.addEventListener("contextmenu",function(e){return e.preventDefault()})}),a(this,"createBoard",function(){for(var e="",t=0;t<s.y;t++){e+="<div class='board__row'>";for(var n=0;n<s.x;n++)e+="<div class='board__item covered' data-board-item data-x=".concat(n," data-y=").concat(t,"></div>");e+="</div>"}s.element.insertAdjacentHTML("afterbegin",e),s.element.querySelectorAll(".board__row").forEach(function(e){return s.board.push(i(e.querySelectorAll(".board__item")))})}),a(this,"getBoardItems",function(){return s.boardItems=i(document.querySelectorAll(s.boardItemsSelector))}),a(this,"generateBombs",function(){for(var e=i(s.boardItems),t=0;t<s.bombs;t++){var n=Math.floor(Math.random()*e.length);e.splice(n,1)[0].classList.add(s.bombClass)}return e}),a(this,"placeNumbers",function(e){e.forEach(function(e){var t=0;s.findAdjacentElements(e.dataset.x,e.dataset.y).forEach(function(e){return e.classList.contains("board__item--bomb")&&t++}),e.classList.add(t?"board__item--".concat(t):"board__item--empty")})}),a(this,"findAdjacentElements",function(e,t){e=parseInt(e);var n=[];return(t=parseInt(t))-1>=0&&e-1>=0&&n.push(s.board[t-1][e-1]),t-1>=0&&n.push(s.board[t-1][e]),t-1>=0&&e+1<s.x&&n.push(s.board[t-1][e+1]),e-1>=0&&n.push(s.board[t][e-1]),e+1<s.x&&n.push(s.board[t][e+1]),t+1<s.y&&e-1>=0&&n.push(s.board[t+1][e-1]),t+1<s.y&&n.push(s.board[t+1][e]),t+1<s.y&&e+1<s.x&&n.push(s.board[t+1][e+1]),n}),a(this,"addClickHandleToItems",function(){s.element.addEventListener("contextmenu",function(e){e.preventDefault();var t=e.target;t.classList.contains("covered")&&t.classList.toggle("flag")}),s.element.addEventListener("click",function(e){s.handleItemClick(e),s.checkWinConditions()})}),a(this,"handleItemClick",function(e){e.preventDefault(),console.log(e),3==e.which?console.log("right click"):s.uncover(e.target)}),a(this,"uncover",function(e){e.classList.remove("covered"),e.classList.contains("board__item--bomb")?console.log("you lose"):e.classList.contains("board__item--empty")&&s.findAdjacentElements(e.dataset.x,e.dataset.y).forEach(function(e){e.classList.contains("covered")&&e.classList.contains("board__item--empty")&&s.uncover(e),e.classList.remove("covered")})}),a(this,"checkWinConditions",function(){var e=!0;s.board.forEach(function(t){return t.forEach(function(t){!t.classList.contains("board__item--bomb")&&t.classList.contains("covered")&&(e=!1)})}),console.log(e)}),this.element=document.querySelector(t),this.x=n,this.y=r,this.bombs=o,this.boardItemsSelector="[data-board-item]",this.bombClass="board__item--bomb",this.board=[],this.createBoard(),this.getBoardItems(),this.placeNumbers(this.generateBombs()),this.addClickHandleToItems()}("#board",4,4,1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Njc3MvbWFpbi5zY3NzPzdjYWMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3Njc3MvbWFpbi5zY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9saWIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL3VybHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2FwcC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9UaW1lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvY29tcG9uZW50cy9Cb2FyZC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyIsInB1c2giLCJ1c2VTb3VyY2VNYXAiLCJsaXN0IiwidG9TdHJpbmciLCJ0aGlzIiwibWFwIiwiaXRlbSIsImNzc01hcHBpbmciLCJidG9hIiwic291cmNlTWFwcGluZyIsInNvdXJjZU1hcCIsImJhc2U2NCIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJjb25jYXQiLCJzb3VyY2VVUkxzIiwic291cmNlcyIsInNvdXJjZSIsInNvdXJjZVJvb3QiLCJqb2luIiwiY3NzV2l0aE1hcHBpbmdUb1N0cmluZyIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwibGVuZ3RoIiwiaWQiLCJfaSIsImZuIiwibWVtbyIsInN0eWxlc0luRG9tIiwiaXNPbGRJRSIsIndpbmRvdyIsImRvY3VtZW50IiwiYWxsIiwiYXRvYiIsImFwcGx5IiwiYXJndW1lbnRzIiwiZ2V0RWxlbWVudCIsInRhcmdldCIsInBhcmVudCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJzaW5nbGV0b24iLCJzaW5nbGV0b25Db3VudGVyIiwic3R5bGVzSW5zZXJ0ZWRBdFRvcCIsImZpeFVybHMiLCJhZGRTdHlsZXNUb0RvbSIsInN0eWxlcyIsImRvbVN0eWxlIiwicmVmcyIsImoiLCJwYXJ0cyIsImFkZFN0eWxlIiwibGlzdFRvU3R5bGVzIiwibmV3U3R5bGVzIiwiYmFzZSIsInBhcnQiLCJjc3MiLCJtZWRpYSIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlIiwiRXJyb3IiLCJsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJhcHBlbmRDaGlsZCIsImZpcnN0Q2hpbGQiLCJiZWZvcmUiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJzIiwidHlwZSIsIm5vbmNlIiwibmMiLCJnZXROb25jZSIsImFkZEF0dHJzIiwiZWwiLCJrZXlzIiwiZm9yRWFjaCIsInNldEF0dHJpYnV0ZSIsIm9iaiIsInVwZGF0ZSIsInJlbW92ZSIsInJlc3VsdCIsImRlZmF1bHQiLCJzdHlsZUluZGV4IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsIkJsb2IiLCJsaW5rIiwicmVsIiwiY3JlYXRlTGlua0VsZW1lbnQiLCJhdXRvRml4VXJscyIsImNvbnZlcnRUb0Fic29sdXRlVXJscyIsImJsb2IiLCJvbGRTcmMiLCJocmVmIiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJjcmVhdGVUZXh0Tm9kZSIsIm5ld09iaiIsIkRFQlVHIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwiaW5kZXgiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsIkJvb2xlYW4iLCJjc3NOb2RlIiwiY2hpbGROb2RlcyIsImxvY2F0aW9uIiwiYmFzZVVybCIsInByb3RvY29sIiwiaG9zdCIsImN1cnJlbnREaXIiLCJwYXRobmFtZSIsInJlcGxhY2UiLCJmdWxsTWF0Y2giLCJvcmlnVXJsIiwibmV3VXJsIiwidW5xdW90ZWRPcmlnVXJsIiwidHJpbSIsIiQxIiwidGVzdCIsIlRpbWVyIiwic2VsZWN0b3IiLCJfdGhpcyIsImluaXRpYWxWYWx1ZSIsIl9jbGFzc0NhbGxDaGVjayIsIl9kZWZpbmVQcm9wZXJ0eSIsImVsZW1lbnQiLCJpbm5lckhUTUwiLCJzZXRDb3VudGRvd24iLCJpbnRlcnZhbCIsImNvdW50ZG93biIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsImluaXQiLCJCb2FyZCIsIngiLCJ5IiwiYm9tYnMiLCJCb2FyZF9jbGFzc0NhbGxDaGVjayIsIkJvYXJkX2RlZmluZVByb3BlcnR5IiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiYm9hcmQiLCJ5aSIsInhpIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicXVlcnlTZWxlY3RvckFsbCIsInJvdyIsIl90b0NvbnN1bWFibGVBcnJheSIsImJvYXJkSXRlbXMiLCJib2FyZEl0ZW1zU2VsZWN0b3IiLCJyYW5kb21JbmRleCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNsYXNzTGlzdCIsImFkZCIsImJvbWJDbGFzcyIsImNvdW50ZXIiLCJmaW5kQWRqYWNlbnRFbGVtZW50cyIsImRhdGFzZXQiLCJjb250YWlucyIsInBhcnNlSW50IiwiYWRqYWNlbnRzIiwidG9nZ2xlIiwiaGFuZGxlSXRlbUNsaWNrIiwiY2hlY2tXaW5Db25kaXRpb25zIiwiY29uc29sZSIsImxvZyIsIndoaWNoIiwidW5jb3ZlciIsIndpbiIsImNyZWF0ZUJvYXJkIiwiZ2V0Qm9hcmRJdGVtcyIsInBsYWNlTnVtYmVycyIsImdlbmVyYXRlQm9tYnMiLCJhZGRDbGlja0hhbmRsZVRvSXRlbXMiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFB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R0FBWEEsRUFBRStJLE1BQ0RGLFFBQVFDLElBQUksZUFHWjlDLEVBQUtnRCxRQUFRaEosRUFBRVAsVUF2Rll3SCxFQUFBNUosS0FBQSxVQTJGekIsU0FBQW9DLEdBQ05BLEVBQU93SSxVQUFVakYsT0FBTyxXQUNwQnZELEVBQU93SSxVQUFVTSxTQUFTLHFCQUMxQk0sUUFBUUMsSUFBSSxZQUNMckosRUFBT3dJLFVBQVVNLFNBQVMsdUJBQ2pDdkMsRUFBS3FDLHFCQUFxQjVJLEVBQU82SSxRQUFRekIsRUFBR3BILEVBQU82SSxRQUFReEIsR0FBR2xFLFFBQVEsU0FBQUYsR0FDOURBLEVBQUd1RixVQUFVTSxTQUFTLFlBQWM3RixFQUFHdUYsVUFBVU0sU0FBUyx1QkFBdUJ2QyxFQUFLZ0QsUUFBUXRHLEdBQ2xHQSxFQUFHdUYsVUFBVWpGLE9BQU8sZUFsR0dpRSxFQUFBNUosS0FBQSxxQkF1R2QsV0FDakIsSUFBSTRMLEdBQU0sRUFDVmpELEVBQUtvQixNQUFNeEUsUUFBUSxTQUFBNkUsR0FBRyxPQUFJQSxFQUFJN0UsUUFBUSxTQUFBRixJQUFjQSxFQUFHdUYsVUFBVU0sU0FBUyxzQkFBeUI3RixFQUFHdUYsVUFBVU0sU0FBUyxhQUFZVSxHQUFNLE9BQzNJSixRQUFRQyxJQUFJRyxLQXpHWjVMLEtBQUsrSSxRQUFVakgsU0FBU1MsY0FBY21HLEdBQ3RDMUksS0FBS3dKLEVBQUlBLEVBQ1R4SixLQUFLeUosRUFBSUEsRUFDVHpKLEtBQUswSixNQUFRQSxFQUNiMUosS0FBS3VLLG1CQUFxQixvQkFDMUJ2SyxLQUFLOEssVUFBWSxvQkFDakI5SyxLQUFLK0osTUFBUSxHQUdiL0osS0FBSzZMLGNBQ0w3TCxLQUFLOEwsZ0JBQ0w5TCxLQUFLK0wsYUFBYS9MLEtBQUtnTSxpQkFDdkJoTSxLQUFLaU0sd0JGUmIsQ0FBVSxTQUFVLEVBQUcsRUFBRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDUpO1xuIiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vbWFpbi5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL21haW4uc2Nzc1wiLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vbWFpbi5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59IiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9hcGkuanNcIikoZmFsc2UpO1xuLy8gTW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiBodHRwOi8vbWV5ZXJ3ZWIuY29tL2VyaWMvdG9vbHMvY3NzL3Jlc2V0LyBcXHJcXG4gICB2Mi4wIHwgMjAxMTAxMjZcXHJcXG4gICBMaWNlbnNlOiBub25lIChwdWJsaWMgZG9tYWluKVxcclxcbiovXFxuaHRtbCwgYm9keSwgZGl2LCBzcGFuLCBhcHBsZXQsIG9iamVjdCwgaWZyYW1lLCBoMSwgaDIsIGgzLCBoNCwgaDUsIGg2LCBwLCBibG9ja3F1b3RlLCBwcmUsIGEsIGFiYnIsIGFjcm9ueW0sIGFkZHJlc3MsIGJpZywgY2l0ZSwgY29kZSwgZGVsLCBkZm4sIGVtLCBpbWcsIGlucywga2JkLCBxLCBzLCBzYW1wLCBzbWFsbCwgc3RyaWtlLCBzdHJvbmcsIHN1Yiwgc3VwLCB0dCwgdmFyLCBiLCB1LCBpLCBjZW50ZXIsIGRsLCBkdCwgZGQsIG9sLCB1bCwgbGksIGZpZWxkc2V0LCBmb3JtLCBsYWJlbCwgbGVnZW5kLCB0YWJsZSwgY2FwdGlvbiwgdGJvZHksIHRmb290LCB0aGVhZCwgdHIsIHRoLCB0ZCwgYXJ0aWNsZSwgYXNpZGUsIGNhbnZhcywgZGV0YWlscywgZW1iZWQsIGZpZ3VyZSwgZmlnY2FwdGlvbiwgZm9vdGVyLCBoZWFkZXIsIGhncm91cCwgbWVudSwgbmF2LCBvdXRwdXQsIHJ1YnksIHNlY3Rpb24sIHN1bW1hcnksIHRpbWUsIG1hcmssIGF1ZGlvLCB2aWRlbyB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm9yZGVyOiAwO1xcbiAgZm9udC1zaXplOiAxMDAlO1xcbiAgZm9udDogaW5oZXJpdDtcXG4gIHZlcnRpY2FsLWFsaWduOiBiYXNlbGluZTsgfVxcblxcbi8qIEhUTUw1IGRpc3BsYXktcm9sZSByZXNldCBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cXG5hcnRpY2xlLCBhc2lkZSwgZGV0YWlscywgZmlnY2FwdGlvbiwgZmlndXJlLCBmb290ZXIsIGhlYWRlciwgaGdyb3VwLCBtZW51LCBuYXYsIHNlY3Rpb24ge1xcbiAgZGlzcGxheTogYmxvY2s7IH1cXG5cXG5ib2R5IHtcXG4gIGxpbmUtaGVpZ2h0OiAxOyB9XFxuXFxub2wsIHVsIHtcXG4gIGxpc3Qtc3R5bGU6IG5vbmU7IH1cXG5cXG5ibG9ja3F1b3RlLCBxIHtcXG4gIHF1b3Rlczogbm9uZTsgfVxcbiAgYmxvY2txdW90ZTpiZWZvcmUsIGJsb2NrcXVvdGU6YWZ0ZXIsIHE6YmVmb3JlLCBxOmFmdGVyIHtcXG4gICAgY29udGVudDogJyc7XFxuICAgIGNvbnRlbnQ6IG5vbmU7IH1cXG5cXG50YWJsZSB7XFxuICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xcbiAgYm9yZGVyLXNwYWNpbmc6IDA7IH1cXG5cXG5odG1sLCBib2R5IHtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IH1cXG5cXG4uZ2FtZS1jb250YWluZXIge1xcbiAgYmFja2dyb3VuZDogZ3JleTtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIGJvcmRlcjogM3B4IHNvbGlkICM2NjY7IH1cXG5cXG4uYm9hcmRfX3JvdyB7XFxuICBkaXNwbGF5OiBmbGV4OyB9XFxuXFxuLmJvYXJkX19pdGVtIHtcXG4gIHdpZHRoOiAzNXB4O1xcbiAgaGVpZ2h0OiAzNXB4O1xcbiAgYm9yZGVyLXdpZHRoOiAycHg7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBiYWNrZ3JvdW5kOiAjY2NjO1xcbiAgYm9yZGVyLXN0eWxlOiBpbnNldDsgfVxcbiAgLmJvYXJkX19pdGVtLmNvdmVyZWQge1xcbiAgICBib3JkZXItc3R5bGU6IG91dHNldDtcXG4gICAgYmFja2dyb3VuZDogI2FhYTsgfVxcbiAgICAuYm9hcmRfX2l0ZW0uY292ZXJlZDphY3RpdmUge1xcbiAgICAgIGJvcmRlci1zdHlsZTogaW5zZXQ7IH1cXG4gICAgLmJvYXJkX19pdGVtLmNvdmVyZWQ6YWZ0ZXIge1xcbiAgICAgIGNvbnRlbnQ6ICcnOyB9XFxuICAuYm9hcmRfX2l0ZW0uZmxhZyB7XFxuICAgIGJhY2tncm91bmQ6IHJlZDtcXG4gICAgYm9yZGVyLXN0eWxlOiBvdXRzZXQ7IH1cXG4gICAgLmJvYXJkX19pdGVtLmZsYWc6YWN0aXZlIHtcXG4gICAgICBib3JkZXItc3R5bGU6IG91dHNldDsgfVxcbiAgLmJvYXJkX19pdGVtLS1ib21iLCAuYm9hcmRfX2l0ZW0tLWZsYWcge1xcbiAgICBib3JkZXItc3R5bGU6IGluc2V0OyB9XFxuICAuYm9hcmRfX2l0ZW0tLWJvbWIge1xcbiAgICBiYWNrZ3JvdW5kOiBibGFjazsgfVxcbiAgLmJvYXJkX19pdGVtLS0xOmFmdGVyLCAuYm9hcmRfX2l0ZW0tLTI6YWZ0ZXIsIC5ib2FyZF9faXRlbS0tMzphZnRlciwgLmJvYXJkX19pdGVtLS00OmFmdGVyLCAuYm9hcmRfX2l0ZW0tLTU6YWZ0ZXIsIC5ib2FyZF9faXRlbS0tNjphZnRlciwgLmJvYXJkX19pdGVtLS03OmFmdGVyLCAuYm9hcmRfX2l0ZW0tLTg6YWZ0ZXIge1xcbiAgICBmb250LXNpemU6IDIycHg7XFxuICAgIGZvbnQtZmFtaWx5OiBtb25vc3BhY2U7XFxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gICAgdG9wOiA1MCU7XFxuICAgIGxlZnQ6IDUwJTtcXG4gICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7XFxuICAgIGZvbnQtd2VpZ2h0OiA2MDA7IH1cXG4gIC5ib2FyZF9faXRlbS0tMTphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICcxJztcXG4gICAgY29sb3I6IGJsdWU7IH1cXG4gIC5ib2FyZF9faXRlbS0tMjphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICcyJztcXG4gICAgY29sb3I6IGdyZWVuOyB9XFxuICAuYm9hcmRfX2l0ZW0tLTM6YWZ0ZXIge1xcbiAgICBjb250ZW50OiAnMyc7XFxuICAgIGNvbG9yOiByZWQ7IH1cXG4gIC5ib2FyZF9faXRlbS0tNDphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICc0JztcXG4gICAgY29sb3I6IG5hdnk7IH1cXG4gIC5ib2FyZF9faXRlbS0tNTphZnRlciB7XFxuICAgIGNvbnRlbnQ6ICc1JztcXG4gICAgY29sb3I6IHB1cnBsZTsgfVxcbiAgLmJvYXJkX19pdGVtLS02OmFmdGVyIHtcXG4gICAgY29udGVudDogJzYnO1xcbiAgICBjb2xvcjogY2FkZXRibHVlOyB9XFxuICAuYm9hcmRfX2l0ZW0tLTc6YWZ0ZXIge1xcbiAgICBjb250ZW50OiAnNyc7XFxuICAgIGNvbG9yOiBibGFjazsgfVxcbiAgLmJvYXJkX19pdGVtLS04OmFmdGVyIHtcXG4gICAgY29udGVudDogJzgnO1xcbiAgICBjb2xvcjogZ3JleTsgfVxcblxcbi5pbmZvIHtcXG4gIGhlaWdodDogMzBweDtcXG4gIGJhY2tncm91bmQ6IGxpZ2h0Z3JleTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgcGFkZGluZzogMjBweDsgfVxcblwiLCBcIlwiXSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuLypcbiAgTUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcbiAgQXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxuKi9cbi8vIGNzcyBiYXNlIGNvZGUsIGluamVjdGVkIGJ5IHRoZSBjc3MtbG9hZGVyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodXNlU291cmNlTWFwKSB7XG4gIHZhciBsaXN0ID0gW107IC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcblxuICBsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICB2YXIgY29udGVudCA9IGNzc1dpdGhNYXBwaW5nVG9TdHJpbmcoaXRlbSwgdXNlU291cmNlTWFwKTtcblxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgcmV0dXJuIFwiQG1lZGlhIFwiLmNvbmNhdChpdGVtWzJdLCBcIntcIikuY29uY2F0KGNvbnRlbnQsIFwifVwiKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgfSkuam9pbignJyk7XG4gIH07IC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG5cblxuICBsaXN0LmkgPSBmdW5jdGlvbiAobW9kdWxlcywgbWVkaWFRdWVyeSkge1xuICAgIGlmICh0eXBlb2YgbW9kdWxlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgbW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgJyddXTtcbiAgICB9XG5cbiAgICB2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWRlc3RydWN0dXJpbmdcbiAgICAgIHZhciBpZCA9IHRoaXNbaV1bMF07XG5cbiAgICAgIGlmIChpZCAhPSBudWxsKSB7XG4gICAgICAgIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbW9kdWxlcy5sZW5ndGg7IF9pKyspIHtcbiAgICAgIHZhciBpdGVtID0gbW9kdWxlc1tfaV07IC8vIHNraXAgYWxyZWFkeSBpbXBvcnRlZCBtb2R1bGVcbiAgICAgIC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXG4gICAgICAvLyB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXG4gICAgICAvLyBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXG5cbiAgICAgIGlmIChpdGVtWzBdID09IG51bGwgfHwgIWFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgaWYgKG1lZGlhUXVlcnkgJiYgIWl0ZW1bMl0pIHtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWFRdWVyeTtcbiAgICAgICAgfSBlbHNlIGlmIChtZWRpYVF1ZXJ5KSB7XG4gICAgICAgICAgaXRlbVsyXSA9IFwiKFwiLmNvbmNhdChpdGVtWzJdLCBcIikgYW5kIChcIikuY29uY2F0KG1lZGlhUXVlcnksIFwiKVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3QucHVzaChpdGVtKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGxpc3Q7XG59O1xuXG5mdW5jdGlvbiBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0sIHVzZVNvdXJjZU1hcCkge1xuICB2YXIgY29udGVudCA9IGl0ZW1bMV0gfHwgJyc7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItZGVzdHJ1Y3R1cmluZ1xuXG4gIHZhciBjc3NNYXBwaW5nID0gaXRlbVszXTtcblxuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuXG4gIGlmICh1c2VTb3VyY2VNYXAgJiYgdHlwZW9mIGJ0b2EgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgc291cmNlTWFwcGluZyA9IHRvQ29tbWVudChjc3NNYXBwaW5nKTtcbiAgICB2YXIgc291cmNlVVJMcyA9IGNzc01hcHBpbmcuc291cmNlcy5tYXAoZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgcmV0dXJuIFwiLyojIHNvdXJjZVVSTD1cIi5jb25jYXQoY3NzTWFwcGluZy5zb3VyY2VSb290KS5jb25jYXQoc291cmNlLCBcIiAqL1wiKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW2NvbnRlbnRdLmNvbmNhdChzb3VyY2VVUkxzKS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHJldHVybiBbY29udGVudF0uam9pbignXFxuJyk7XG59IC8vIEFkYXB0ZWQgZnJvbSBjb252ZXJ0LXNvdXJjZS1tYXAgKE1JVClcblxuXG5mdW5jdGlvbiB0b0NvbW1lbnQoc291cmNlTWFwKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICB2YXIgYmFzZTY0ID0gYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKTtcbiAgdmFyIGRhdGEgPSBcInNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTg7YmFzZTY0LFwiLmNvbmNhdChiYXNlNjQpO1xuICByZXR1cm4gXCIvKiMgXCIuY29uY2F0KGRhdGEsIFwiICovXCIpO1xufSIsIi8qXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcbiovXG5cbnZhciBzdHlsZXNJbkRvbSA9IHt9O1xuXG52YXJcdG1lbW9pemUgPSBmdW5jdGlvbiAoZm4pIHtcblx0dmFyIG1lbW87XG5cblx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdHJldHVybiBtZW1vO1xuXHR9O1xufTtcblxudmFyIGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0Ly8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3Ncblx0Ly8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuXHQvLyBUZXN0cyBmb3IgZXhpc3RlbmNlIG9mIHN0YW5kYXJkIGdsb2JhbHMgaXMgdG8gYWxsb3cgc3R5bGUtbG9hZGVyXG5cdC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuXHQvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcblx0cmV0dXJuIHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iO1xufSk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiAodGFyZ2V0LCBwYXJlbnQpIHtcbiAgaWYgKHBhcmVudCl7XG4gICAgcmV0dXJuIHBhcmVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG4gIH1cbiAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcbn07XG5cbnZhciBnZXRFbGVtZW50ID0gKGZ1bmN0aW9uIChmbikge1xuXHR2YXIgbWVtbyA9IHt9O1xuXG5cdHJldHVybiBmdW5jdGlvbih0YXJnZXQsIHBhcmVudCkge1xuICAgICAgICAgICAgICAgIC8vIElmIHBhc3NpbmcgZnVuY3Rpb24gaW4gb3B0aW9ucywgdGhlbiB1c2UgaXQgZm9yIHJlc29sdmUgXCJoZWFkXCIgZWxlbWVudC5cbiAgICAgICAgICAgICAgICAvLyBVc2VmdWwgZm9yIFNoYWRvdyBSb290IHN0eWxlIGkuZVxuICAgICAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgICAgICAvLyAgIGluc2VydEludG86IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZm9vXCIpLnNoYWRvd1Jvb3QgfVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0dmFyIHN0eWxlVGFyZ2V0ID0gZ2V0VGFyZ2V0LmNhbGwodGhpcywgdGFyZ2V0LCBwYXJlbnQpO1xuXHRcdFx0Ly8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblx0XHRcdGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHQvLyBUaGlzIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFjY2VzcyB0byBpZnJhbWUgaXMgYmxvY2tlZFxuXHRcdFx0XHRcdC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBzdHlsZVRhcmdldC5jb250ZW50RG9jdW1lbnQuaGVhZDtcblx0XHRcdFx0fSBjYXRjaChlKSB7XG5cdFx0XHRcdFx0c3R5bGVUYXJnZXQgPSBudWxsO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcblx0XHR9XG5cdFx0cmV0dXJuIG1lbW9bdGFyZ2V0XVxuXHR9O1xufSkoKTtcblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXJcdHNpbmdsZXRvbkNvdW50ZXIgPSAwO1xudmFyXHRzdHlsZXNJbnNlcnRlZEF0VG9wID0gW107XG5cbnZhclx0Zml4VXJscyA9IHJlcXVpcmUoXCIuL3VybHNcIik7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZiAodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XG5cdFx0aWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKFwiVGhlIHN0eWxlLWxvYWRlciBjYW5ub3QgYmUgdXNlZCBpbiBhIG5vbi1icm93c2VyIGVudmlyb25tZW50XCIpO1xuXHR9XG5cblx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0b3B0aW9ucy5hdHRycyA9IHR5cGVvZiBvcHRpb25zLmF0dHJzID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5hdHRycyA6IHt9O1xuXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHQvLyB0YWdzIGl0IHdpbGwgYWxsb3cgb24gYSBwYWdlXG5cdGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSBcImJvb2xlYW5cIikgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG5cblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgPGhlYWQ+IGVsZW1lbnRcbiAgICAgICAgaWYgKCFvcHRpb25zLmluc2VydEludG8pIG9wdGlvbnMuaW5zZXJ0SW50byA9IFwiaGVhZFwiO1xuXG5cdC8vIEJ5IGRlZmF1bHQsIGFkZCA8c3R5bGU+IHRhZ3MgdG8gdGhlIGJvdHRvbSBvZiB0aGUgdGFyZ2V0XG5cdGlmICghb3B0aW9ucy5pbnNlcnRBdCkgb3B0aW9ucy5pbnNlcnRBdCA9IFwiYm90dG9tXCI7XG5cblx0dmFyIHN0eWxlcyA9IGxpc3RUb1N0eWxlcyhsaXN0LCBvcHRpb25zKTtcblxuXHRhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpO1xuXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUgKG5ld0xpc3QpIHtcblx0XHR2YXIgbWF5UmVtb3ZlID0gW107XG5cblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBzdHlsZXNbaV07XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdFx0ZG9tU3R5bGUucmVmcy0tO1xuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdH1cblxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCwgb3B0aW9ucyk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykgZG9tU3R5bGUucGFydHNbal0oKTtcblxuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn07XG5cbmZ1bmN0aW9uIGFkZFN0eWxlc1RvRG9tIChzdHlsZXMsIG9wdGlvbnMpIHtcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblxuXHRcdGlmKGRvbVN0eWxlKSB7XG5cdFx0XHRkb21TdHlsZS5yZWZzKys7XG5cblx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdH1cblxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdH1cblxuXHRcdFx0c3R5bGVzSW5Eb21baXRlbS5pZF0gPSB7aWQ6IGl0ZW0uaWQsIHJlZnM6IDEsIHBhcnRzOiBwYXJ0c307XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyAobGlzdCwgb3B0aW9ucykge1xuXHR2YXIgc3R5bGVzID0gW107XG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcblxuXHRmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IGxpc3RbaV07XG5cdFx0dmFyIGlkID0gb3B0aW9ucy5iYXNlID8gaXRlbVswXSArIG9wdGlvbnMuYmFzZSA6IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cblx0XHRpZighbmV3U3R5bGVzW2lkXSkgc3R5bGVzLnB1c2gobmV3U3R5bGVzW2lkXSA9IHtpZDogaWQsIHBhcnRzOiBbcGFydF19KTtcblx0XHRlbHNlIG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudCAob3B0aW9ucywgc3R5bGUpIHtcblx0dmFyIHRhcmdldCA9IGdldEVsZW1lbnQob3B0aW9ucy5pbnNlcnRJbnRvKVxuXG5cdGlmICghdGFyZ2V0KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnRJbnRvJyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG5cdH1cblxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZXNJbnNlcnRlZEF0VG9wW3N0eWxlc0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cblx0aWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidG9wXCIpIHtcblx0XHRpZiAoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmIChsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZShzdHlsZSwgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AubmV4dFNpYmxpbmcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHRcdH1cblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGUpO1xuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydEF0ID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuaW5zZXJ0QXQuYmVmb3JlKSB7XG5cdFx0dmFyIG5leHRTaWJsaW5nID0gZ2V0RWxlbWVudChvcHRpb25zLmluc2VydEF0LmJlZm9yZSwgdGFyZ2V0KTtcblx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBuZXh0U2libGluZyk7XG5cdH0gZWxzZSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiW1N0eWxlIExvYWRlcl1cXG5cXG4gSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcgKCdvcHRpb25zLmluc2VydEF0JykgZm91bmQuXFxuIE11c3QgYmUgJ3RvcCcsICdib3R0b20nLCBvciBPYmplY3QuXFxuIChodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlciNpbnNlcnRhdClcXG5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50IChzdHlsZSkge1xuXHRpZiAoc3R5bGUucGFyZW50Tm9kZSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcblxuXHR2YXIgaWR4ID0gc3R5bGVzSW5zZXJ0ZWRBdFRvcC5pbmRleE9mKHN0eWxlKTtcblx0aWYoaWR4ID49IDApIHtcblx0XHRzdHlsZXNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudCAob3B0aW9ucykge1xuXHR2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblxuXHRpZihvcHRpb25zLmF0dHJzLm5vbmNlID09PSB1bmRlZmluZWQpIHtcblx0XHR2YXIgbm9uY2UgPSBnZXROb25jZSgpO1xuXHRcdGlmIChub25jZSkge1xuXHRcdFx0b3B0aW9ucy5hdHRycy5ub25jZSA9IG5vbmNlO1xuXHRcdH1cblx0fVxuXG5cdGFkZEF0dHJzKHN0eWxlLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlKTtcblxuXHRyZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxpbmtFbGVtZW50IChvcHRpb25zKSB7XG5cdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG5cblx0aWYob3B0aW9ucy5hdHRycy50eXBlID09PSB1bmRlZmluZWQpIHtcblx0XHRvcHRpb25zLmF0dHJzLnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdH1cblx0b3B0aW9ucy5hdHRycy5yZWwgPSBcInN0eWxlc2hlZXRcIjtcblxuXHRhZGRBdHRycyhsaW5rLCBvcHRpb25zLmF0dHJzKTtcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIGxpbmspO1xuXG5cdHJldHVybiBsaW5rO1xufVxuXG5mdW5jdGlvbiBhZGRBdHRycyAoZWwsIGF0dHJzKSB7XG5cdE9iamVjdC5rZXlzKGF0dHJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblx0XHRlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGdldE5vbmNlKCkge1xuXHRpZiAodHlwZW9mIF9fd2VicGFja19ub25jZV9fID09PSAndW5kZWZpbmVkJykge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0cmV0dXJuIF9fd2VicGFja19ub25jZV9fO1xufVxuXG5mdW5jdGlvbiBhZGRTdHlsZSAob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZSwgdXBkYXRlLCByZW1vdmUsIHJlc3VsdDtcblxuXHQvLyBJZiBhIHRyYW5zZm9ybSBmdW5jdGlvbiB3YXMgZGVmaW5lZCwgcnVuIGl0IG9uIHRoZSBjc3Ncblx0aWYgKG9wdGlvbnMudHJhbnNmb3JtICYmIG9iai5jc3MpIHtcblx0ICAgIHJlc3VsdCA9IHR5cGVvZiBvcHRpb25zLnRyYW5zZm9ybSA9PT0gJ2Z1bmN0aW9uJ1xuXHRcdCA/IG9wdGlvbnMudHJhbnNmb3JtKG9iai5jc3MpIFxuXHRcdCA6IG9wdGlvbnMudHJhbnNmb3JtLmRlZmF1bHQob2JqLmNzcyk7XG5cblx0ICAgIGlmIChyZXN1bHQpIHtcblx0ICAgIFx0Ly8gSWYgdHJhbnNmb3JtIHJldHVybnMgYSB2YWx1ZSwgdXNlIHRoYXQgaW5zdGVhZCBvZiB0aGUgb3JpZ2luYWwgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBydW5uaW5nIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb25zIG9uIHRoZSBjc3MuXG5cdCAgICBcdG9iai5jc3MgPSByZXN1bHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgXHQvLyBJZiB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZG9uJ3QgYWRkIHRoaXMgY3NzLlxuXHQgICAgXHQvLyBUaGlzIGFsbG93cyBjb25kaXRpb25hbCBsb2FkaW5nIG9mIGNzc1xuXHQgICAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICBcdFx0Ly8gbm9vcFxuXHQgICAgXHR9O1xuXHQgICAgfVxuXHR9XG5cblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG5cdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cblx0XHRzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblxuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgZmFsc2UpO1xuXHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZSwgc3R5bGVJbmRleCwgdHJ1ZSk7XG5cblx0fSBlbHNlIGlmIChcblx0XHRvYmouc291cmNlTWFwICYmXG5cdFx0dHlwZW9mIFVSTCA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxuXHRcdHR5cGVvZiBVUkwucmV2b2tlT2JqZWN0VVJMID09PSBcImZ1bmN0aW9uXCIgJiZcblx0XHR0eXBlb2YgQmxvYiA9PT0gXCJmdW5jdGlvblwiICYmXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIlxuXHQpIHtcblx0XHRzdHlsZSA9IGNyZWF0ZUxpbmtFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IHVwZGF0ZUxpbmsuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblxuXHRcdFx0aWYoc3R5bGUuaHJlZikgVVJMLnJldm9rZU9iamVjdFVSTChzdHlsZS5ocmVmKTtcblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdHN0eWxlID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlIChuZXdPYmopIHtcblx0XHRpZiAobmV3T2JqKSB7XG5cdFx0XHRpZiAoXG5cdFx0XHRcdG5ld09iai5jc3MgPT09IG9iai5jc3MgJiZcblx0XHRcdFx0bmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiZcblx0XHRcdFx0bmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcFxuXHRcdFx0KSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dXBkYXRlKG9iaiA9IG5ld09iaik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbW92ZSgpO1xuXHRcdH1cblx0fTtcbn1cblxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0dmFyIHRleHRTdG9yZSA9IFtdO1xuXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0dGV4dFN0b3JlW2luZGV4XSA9IHJlcGxhY2VtZW50O1xuXG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnIChzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IHJlcGxhY2VUZXh0KGluZGV4LCBjc3MpO1xuXHR9IGVsc2Uge1xuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHR2YXIgY2hpbGROb2RlcyA9IHN0eWxlLmNoaWxkTm9kZXM7XG5cblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlLnJlbW92ZUNoaWxkKGNoaWxkTm9kZXNbaW5kZXhdKTtcblxuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcgKHN0eWxlLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBtZWRpYSA9IG9iai5tZWRpYTtcblxuXHRpZihtZWRpYSkge1xuXHRcdHN0eWxlLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxuXHR9XG5cblx0aWYoc3R5bGUuc3R5bGVTaGVldCkge1xuXHRcdHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcblx0fSBlbHNlIHtcblx0XHR3aGlsZShzdHlsZS5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcblx0XHR9XG5cblx0XHRzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcblx0fVxufVxuXG5mdW5jdGlvbiB1cGRhdGVMaW5rIChsaW5rLCBvcHRpb25zLCBvYmopIHtcblx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG5cdC8qXG5cdFx0SWYgY29udmVydFRvQWJzb2x1dGVVcmxzIGlzbid0IGRlZmluZWQsIGJ1dCBzb3VyY2VtYXBzIGFyZSBlbmFibGVkXG5cdFx0YW5kIHRoZXJlIGlzIG5vIHB1YmxpY1BhdGggZGVmaW5lZCB0aGVuIGxldHMgdHVybiBjb252ZXJ0VG9BYnNvbHV0ZVVybHNcblx0XHRvbiBieSBkZWZhdWx0LiAgT3RoZXJ3aXNlIGRlZmF1bHQgdG8gdGhlIGNvbnZlcnRUb0Fic29sdXRlVXJscyBvcHRpb25cblx0XHRkaXJlY3RseVxuXHQqL1xuXHR2YXIgYXV0b0ZpeFVybHMgPSBvcHRpb25zLmNvbnZlcnRUb0Fic29sdXRlVXJscyA9PT0gdW5kZWZpbmVkICYmIHNvdXJjZU1hcDtcblxuXHRpZiAob3B0aW9ucy5jb252ZXJ0VG9BYnNvbHV0ZVVybHMgfHwgYXV0b0ZpeFVybHMpIHtcblx0XHRjc3MgPSBmaXhVcmxzKGNzcyk7XG5cdH1cblxuXHRpZiAoc291cmNlTWFwKSB7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtjc3NdLCB7IHR5cGU6IFwidGV4dC9jc3NcIiB9KTtcblxuXHR2YXIgb2xkU3JjID0gbGluay5ocmVmO1xuXG5cdGxpbmsuaHJlZiA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cblx0aWYob2xkU3JjKSBVUkwucmV2b2tlT2JqZWN0VVJMKG9sZFNyYyk7XG59XG4iLCJcbi8qKlxuICogV2hlbiBzb3VyY2UgbWFwcyBhcmUgZW5hYmxlZCwgYHN0eWxlLWxvYWRlcmAgdXNlcyBhIGxpbmsgZWxlbWVudCB3aXRoIGEgZGF0YS11cmkgdG9cbiAqIGVtYmVkIHRoZSBjc3Mgb24gdGhlIHBhZ2UuIFRoaXMgYnJlYWtzIGFsbCByZWxhdGl2ZSB1cmxzIGJlY2F1c2Ugbm93IHRoZXkgYXJlIHJlbGF0aXZlIHRvIGFcbiAqIGJ1bmRsZSBpbnN0ZWFkIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gKlxuICogT25lIHNvbHV0aW9uIGlzIHRvIG9ubHkgdXNlIGZ1bGwgdXJscywgYnV0IHRoYXQgbWF5IGJlIGltcG9zc2libGUuXG4gKlxuICogSW5zdGVhZCwgdGhpcyBmdW5jdGlvbiBcImZpeGVzXCIgdGhlIHJlbGF0aXZlIHVybHMgdG8gYmUgYWJzb2x1dGUgYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IHBhZ2UgbG9jYXRpb24uXG4gKlxuICogQSBydWRpbWVudGFyeSB0ZXN0IHN1aXRlIGlzIGxvY2F0ZWQgYXQgYHRlc3QvZml4VXJscy5qc2AgYW5kIGNhbiBiZSBydW4gdmlhIHRoZSBgbnBtIHRlc3RgIGNvbW1hbmQuXG4gKlxuICovXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGNzcykge1xuICAvLyBnZXQgY3VycmVudCBsb2NhdGlvblxuICB2YXIgbG9jYXRpb24gPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5sb2NhdGlvbjtcblxuICBpZiAoIWxvY2F0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZml4VXJscyByZXF1aXJlcyB3aW5kb3cubG9jYXRpb25cIik7XG4gIH1cblxuXHQvLyBibGFuayBvciBudWxsP1xuXHRpZiAoIWNzcyB8fCB0eXBlb2YgY3NzICE9PSBcInN0cmluZ1wiKSB7XG5cdCAgcmV0dXJuIGNzcztcbiAgfVxuXG4gIHZhciBiYXNlVXJsID0gbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKyBsb2NhdGlvbi5ob3N0O1xuICB2YXIgY3VycmVudERpciA9IGJhc2VVcmwgKyBsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9cXC9bXlxcL10qJC8sIFwiL1wiKTtcblxuXHQvLyBjb252ZXJ0IGVhY2ggdXJsKC4uLilcblx0Lypcblx0VGhpcyByZWd1bGFyIGV4cHJlc3Npb24gaXMganVzdCBhIHdheSB0byByZWN1cnNpdmVseSBtYXRjaCBicmFja2V0cyB3aXRoaW5cblx0YSBzdHJpbmcuXG5cblx0IC91cmxcXHMqXFwoICA9IE1hdGNoIG9uIHRoZSB3b3JkIFwidXJsXCIgd2l0aCBhbnkgd2hpdGVzcGFjZSBhZnRlciBpdCBhbmQgdGhlbiBhIHBhcmVuc1xuXHQgICAoICA9IFN0YXJ0IGEgY2FwdHVyaW5nIGdyb3VwXG5cdCAgICAgKD86ICA9IFN0YXJ0IGEgbm9uLWNhcHR1cmluZyBncm91cFxuXHQgICAgICAgICBbXikoXSAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICBcXCggID0gTWF0Y2ggYSBzdGFydCBwYXJlbnRoZXNlc1xuXHQgICAgICAgICAgICAgKD86ICA9IFN0YXJ0IGFub3RoZXIgbm9uLWNhcHR1cmluZyBncm91cHNcblx0ICAgICAgICAgICAgICAgICBbXikoXSsgID0gTWF0Y2ggYW55dGhpbmcgdGhhdCBpc24ndCBhIHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgfCAgPSBPUlxuXHQgICAgICAgICAgICAgICAgIFxcKCAgPSBNYXRjaCBhIHN0YXJ0IHBhcmVudGhlc2VzXG5cdCAgICAgICAgICAgICAgICAgICAgIFteKShdKiAgPSBNYXRjaCBhbnl0aGluZyB0aGF0IGlzbid0IGEgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICAgICBcXCkgID0gTWF0Y2ggYSBlbmQgcGFyZW50aGVzZXNcblx0ICAgICAgICAgICAgICkgID0gRW5kIEdyb3VwXG4gICAgICAgICAgICAgICpcXCkgPSBNYXRjaCBhbnl0aGluZyBhbmQgdGhlbiBhIGNsb3NlIHBhcmVuc1xuICAgICAgICAgICkgID0gQ2xvc2Ugbm9uLWNhcHR1cmluZyBncm91cFxuICAgICAgICAgICogID0gTWF0Y2ggYW55dGhpbmdcbiAgICAgICApICA9IENsb3NlIGNhcHR1cmluZyBncm91cFxuXHQgXFwpICA9IE1hdGNoIGEgY2xvc2UgcGFyZW5zXG5cblx0IC9naSAgPSBHZXQgYWxsIG1hdGNoZXMsIG5vdCB0aGUgZmlyc3QuICBCZSBjYXNlIGluc2Vuc2l0aXZlLlxuXHQgKi9cblx0dmFyIGZpeGVkQ3NzID0gY3NzLnJlcGxhY2UoL3VybFxccypcXCgoKD86W14pKF18XFwoKD86W14pKF0rfFxcKFteKShdKlxcKSkqXFwpKSopXFwpL2dpLCBmdW5jdGlvbihmdWxsTWF0Y2gsIG9yaWdVcmwpIHtcblx0XHQvLyBzdHJpcCBxdW90ZXMgKGlmIHRoZXkgZXhpc3QpXG5cdFx0dmFyIHVucXVvdGVkT3JpZ1VybCA9IG9yaWdVcmxcblx0XHRcdC50cmltKClcblx0XHRcdC5yZXBsYWNlKC9eXCIoLiopXCIkLywgZnVuY3Rpb24obywgJDEpeyByZXR1cm4gJDE7IH0pXG5cdFx0XHQucmVwbGFjZSgvXicoLiopJyQvLCBmdW5jdGlvbihvLCAkMSl7IHJldHVybiAkMTsgfSk7XG5cblx0XHQvLyBhbHJlYWR5IGEgZnVsbCB1cmw/IG5vIGNoYW5nZVxuXHRcdGlmICgvXigjfGRhdGE6fGh0dHA6XFwvXFwvfGh0dHBzOlxcL1xcL3xmaWxlOlxcL1xcL1xcL3xcXHMqJCkvaS50ZXN0KHVucXVvdGVkT3JpZ1VybCkpIHtcblx0XHQgIHJldHVybiBmdWxsTWF0Y2g7XG5cdFx0fVxuXG5cdFx0Ly8gY29udmVydCB0aGUgdXJsIHRvIGEgZnVsbCB1cmxcblx0XHR2YXIgbmV3VXJsO1xuXG5cdFx0aWYgKHVucXVvdGVkT3JpZ1VybC5pbmRleE9mKFwiLy9cIikgPT09IDApIHtcblx0XHQgIFx0Ly9UT0RPOiBzaG91bGQgd2UgYWRkIHByb3RvY29sP1xuXHRcdFx0bmV3VXJsID0gdW5xdW90ZWRPcmlnVXJsO1xuXHRcdH0gZWxzZSBpZiAodW5xdW90ZWRPcmlnVXJsLmluZGV4T2YoXCIvXCIpID09PSAwKSB7XG5cdFx0XHQvLyBwYXRoIHNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYmFzZSB1cmxcblx0XHRcdG5ld1VybCA9IGJhc2VVcmwgKyB1bnF1b3RlZE9yaWdVcmw7IC8vIGFscmVhZHkgc3RhcnRzIHdpdGggJy8nXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHBhdGggc2hvdWxkIGJlIHJlbGF0aXZlIHRvIGN1cnJlbnQgZGlyZWN0b3J5XG5cdFx0XHRuZXdVcmwgPSBjdXJyZW50RGlyICsgdW5xdW90ZWRPcmlnVXJsLnJlcGxhY2UoL15cXC5cXC8vLCBcIlwiKTsgLy8gU3RyaXAgbGVhZGluZyAnLi8nXG5cdFx0fVxuXG5cdFx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCB1cmwoLi4uKVxuXHRcdHJldHVybiBcInVybChcIiArIEpTT04uc3RyaW5naWZ5KG5ld1VybCkgKyBcIilcIjtcblx0fSk7XG5cblx0Ly8gc2VuZCBiYWNrIHRoZSBmaXhlZCBjc3Ncblx0cmV0dXJuIGZpeGVkQ3NzO1xufTtcbiIsImltcG9ydCBUaW1lciBmcm9tICcuL2NvbXBvbmVudHMvVGltZXInXHJcbmltcG9ydCBCb2FyZCBmcm9tICcuL2NvbXBvbmVudHMvQm9hcmQnXHJcblxyXG5pbXBvcnQgJy4uL3Njc3MvbWFpbi5zY3NzJztcclxuXHJcbm5ldyBUaW1lcignI3RpbWVyJyk7XHJcbm5ldyBCb2FyZCgnI2JvYXJkJywgNCwgNCwgMSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGltZXIge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGluaXRpYWxWYWx1ZSA9IDApIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gaW5pdGlhbFZhbHVlO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IHRoaXMudmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZXRDb3VudGRvd24oMTAwMCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Q291bnRkb3duID0gaW50ZXJ2YWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvdW50ZG93biA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9ICsrdGhpcy52YWx1ZTtcclxuICAgICAgICAgICAgaWYodGhpcy52YWx1ZSA+PSA5OTkpICBjbGVhckludGVydmFsKGNvdW50ZG93bik7XHJcbiAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQm9hcmQge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHgsIHksIGJvbWJzKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgICAgIHRoaXMuYm9tYnMgPSBib21icztcclxuICAgICAgICB0aGlzLmJvYXJkSXRlbXNTZWxlY3RvciA9ICdbZGF0YS1ib2FyZC1pdGVtXSc7XHJcbiAgICAgICAgdGhpcy5ib21iQ2xhc3MgPSAnYm9hcmRfX2l0ZW0tLWJvbWInO1xyXG4gICAgICAgIHRoaXMuYm9hcmQgPSBbXTtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5wcmV2ZW50Q29udGV4dE1lbnUoKTtcclxuICAgICAgICB0aGlzLmNyZWF0ZUJvYXJkKCk7XHJcbiAgICAgICAgdGhpcy5nZXRCb2FyZEl0ZW1zKCk7XHJcbiAgICAgICAgdGhpcy5wbGFjZU51bWJlcnModGhpcy5nZW5lcmF0ZUJvbWJzKCkpO1xyXG4gICAgICAgIHRoaXMuYWRkQ2xpY2tIYW5kbGVUb0l0ZW1zKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJldmVudENvbnRleHRNZW51ID0gKCkgPT4ge1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCb2FyZCA9ICgpID0+IHtcclxuICAgICAgICBsZXQgYm9hcmQgPSBgYDtcclxuICAgICAgICBmb3IgKGxldCB5aSA9IDA7IHlpIDwgdGhpcy55OyB5aSsrKSB7XHJcbiAgICAgICAgICAgIGJvYXJkICs9IGA8ZGl2IGNsYXNzPSdib2FyZF9fcm93Jz5gO1xyXG4gICAgICAgICAgICBmb3IgKGxldCB4aSA9IDA7IHhpIDwgdGhpcy54OyB4aSsrKSBib2FyZCArPSBgPGRpdiBjbGFzcz0nYm9hcmRfX2l0ZW0gY292ZXJlZCcgZGF0YS1ib2FyZC1pdGVtIGRhdGEteD0ke3hpfSBkYXRhLXk9JHt5aX0+PC9kaXY+YDtcclxuICAgICAgICAgICAgYm9hcmQgKz0gYDwvZGl2PmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBib2FyZCk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib2FyZF9fcm93JykuZm9yRWFjaChyb3cgPT4gdGhpcy5ib2FyZC5wdXNoKFsuLi5yb3cucXVlcnlTZWxlY3RvckFsbCgnLmJvYXJkX19pdGVtJyldKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Qm9hcmRJdGVtcyA9ICgpID0+IHRoaXMuYm9hcmRJdGVtcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuYm9hcmRJdGVtc1NlbGVjdG9yKV07XHJcblxyXG4gICAgZ2VuZXJhdGVCb21icyA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBib2FyZEl0ZW1zID0gWy4uLnRoaXMuYm9hcmRJdGVtc107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJvbWJzOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYm9hcmRJdGVtcy5sZW5ndGgpKTtcclxuICAgICAgICAgICAgYm9hcmRJdGVtcy5zcGxpY2UocmFuZG9tSW5kZXgsIDEpWzBdLmNsYXNzTGlzdC5hZGQodGhpcy5ib21iQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYm9hcmRJdGVtcztcclxuICAgIH1cclxuXHJcbiAgICBwbGFjZU51bWJlcnMgPSBib2FyZCA9PiB7XHJcbiAgICAgICAgYm9hcmQuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBjb3VudGVyID0gMDtcclxuICAgICAgICAgICAgY29uc3QgYWRqYWNlbnQgPSB0aGlzLmZpbmRBZGphY2VudEVsZW1lbnRzKGVsLmRhdGFzZXQueCwgZWwuZGF0YXNldC55KTtcclxuICAgICAgICAgICAgYWRqYWNlbnQuZm9yRWFjaChlbCA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvYXJkX19pdGVtLS1ib21iJykgJiYgY291bnRlcisrKTtcclxuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjb3VudGVyID8gYGJvYXJkX19pdGVtLS0ke2NvdW50ZXJ9YCA6ICdib2FyZF9faXRlbS0tZW1wdHknKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRBZGphY2VudEVsZW1lbnRzID0gKHgsIHkpID0+IHtcclxuICAgICAgICB4ID0gcGFyc2VJbnQoeCk7XHJcbiAgICAgICAgeSA9IHBhcnNlSW50KHkpO1xyXG4gICAgICAgIGxldCBhZGphY2VudHMgPSBbXTtcclxuICAgICAgICBpZiAoeSAtIDEgPj0gMCAmJiB4IC0gMSA+PSAwKSBhZGphY2VudHMucHVzaCh0aGlzLmJvYXJkW3kgLSAxXVt4IC0gMV0pO1xyXG4gICAgICAgIGlmICh5IC0gMSA+PSAwKSBhZGphY2VudHMucHVzaCh0aGlzLmJvYXJkW3kgLSAxXVt4XSk7XHJcbiAgICAgICAgaWYgKHkgLSAxID49IDAgJiYgeCArIDEgPCB0aGlzLngpIGFkamFjZW50cy5wdXNoKHRoaXMuYm9hcmRbeSAtIDFdW3ggKyAxXSk7XHJcbiAgICAgICAgaWYgKHggLSAxID49IDApIGFkamFjZW50cy5wdXNoKHRoaXMuYm9hcmRbeV1beCAtIDFdKTtcclxuICAgICAgICBpZiAoeCArIDEgPCB0aGlzLngpIGFkamFjZW50cy5wdXNoKHRoaXMuYm9hcmRbeV1beCArIDFdKTtcclxuICAgICAgICBpZiAoeSArIDEgPCB0aGlzLnkgJiYgeCAtIDEgPj0gMCkgYWRqYWNlbnRzLnB1c2godGhpcy5ib2FyZFt5ICsgMV1beCAtIDFdKTtcclxuICAgICAgICBpZiAoeSArIDEgPCB0aGlzLnkpIGFkamFjZW50cy5wdXNoKHRoaXMuYm9hcmRbeSArIDFdW3hdKTtcclxuICAgICAgICBpZiAoeSArIDEgPCB0aGlzLnkgJiYgeCArIDEgPCB0aGlzLngpIGFkamFjZW50cy5wdXNoKHRoaXMuYm9hcmRbeSArIDFdW3ggKyAxXSk7XHJcbiAgICAgICAgcmV0dXJuIGFkamFjZW50cztcclxuICAgIH1cclxuXHJcbiAgICBhZGRDbGlja0hhbmRsZVRvSXRlbXMgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgZSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NvdmVyZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2ZsYWcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUl0ZW1DbGljayhlKTtcclxuICAgICAgICAgICAgdGhpcy5jaGVja1dpbkNvbmRpdGlvbnMoKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIGhhbmRsZUl0ZW1DbGljayA9IGUgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICBpZihlLndoaWNoID09IDMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JpZ2h0IGNsaWNrJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5jb3ZlcihlLnRhcmdldCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHVuY292ZXIgPSB0YXJnZXQgPT4ge1xyXG4gICAgICAgIHRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdjb3ZlcmVkJyk7XHJcbiAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvYXJkX19pdGVtLS1ib21iJykpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3lvdSBsb3NlJyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdib2FyZF9faXRlbS0tZW1wdHknKSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmRBZGphY2VudEVsZW1lbnRzKHRhcmdldC5kYXRhc2V0LngsIHRhcmdldC5kYXRhc2V0LnkpLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsLmNsYXNzTGlzdC5jb250YWlucygnY292ZXJlZCcpICYmIGVsLmNsYXNzTGlzdC5jb250YWlucygnYm9hcmRfX2l0ZW0tLWVtcHR5JykpIHRoaXMudW5jb3ZlcihlbCk7XHJcbiAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdjb3ZlcmVkJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjaGVja1dpbkNvbmRpdGlvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgbGV0IHdpbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ib2FyZC5mb3JFYWNoKHJvdyA9PiByb3cuZm9yRWFjaChlbCA9PiB7IGlmICgoIWVsLmNsYXNzTGlzdC5jb250YWlucygnYm9hcmRfX2l0ZW0tLWJvbWInKSkgJiYgZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb3ZlcmVkJykpIHdpbiA9IGZhbHNlIH0pKTtcclxuICAgICAgICBjb25zb2xlLmxvZyh3aW4pO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==